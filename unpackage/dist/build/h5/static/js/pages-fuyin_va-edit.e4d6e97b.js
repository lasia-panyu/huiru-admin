(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-fuyin_va-edit"],{"1ea3":function(a,t,e){"use strict";e.d(t,"b",(function(){return n})),e.d(t,"c",(function(){return o})),e.d(t,"a",(function(){return r}));var r={uniForms:e("5603").default,uniFormsItem:e("a927").default,uniEasyinput:e("7b6b").default,uniDataCheckbox:e("87bd").default,uniDataPicker:e("70b7").default,uniDatetimePicker:e("73c8").default},n=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("v-uni-view",{staticClass:"uni-container"},[e("uni-forms",{ref:"form",attrs:{value:a.formData,validateTrigger:"bind"}},[e("uni-forms-item",{attrs:{name:"name",label:"姓名",required:!0}},[e("uni-easyinput",{attrs:{trim:"both"},model:{value:a.formData.name,callback:function(t){a.$set(a.formData,"name",t)},expression:"formData.name"}})],1),e("uni-forms-item",{attrs:{name:"mobile",label:"手机号码",required:!0}},[e("uni-easyinput",{attrs:{trim:"both"},model:{value:a.formData.mobile,callback:function(t){a.$set(a.formData,"mobile",t)},expression:"formData.mobile"}})],1),e("uni-forms-item",{attrs:{name:"idcard_type",label:"证件类型",required:!0}},[e("uni-data-checkbox",{attrs:{localdata:a.formOptions.idcard_type_localdata},model:{value:a.formData.idcard_type,callback:function(t){a.$set(a.formData,"idcard_type",t)},expression:"formData.idcard_type"}})],1),e("uni-forms-item",{attrs:{name:"from_abroad",label:"户籍",required:!0}},[e("uni-data-checkbox",{attrs:{localdata:a.formOptions.from_abroad_localdata},model:{value:a.formData.from_abroad,callback:function(t){a.$set(a.formData,"from_abroad",t)},expression:"formData.from_abroad"}})],1),e("uni-forms-item",{attrs:{name:"department_id",label:"部门",required:!0}},[e("uni-data-picker",{attrs:{"self-field":"_id","parent-field":"parent_id",collection:"opendb-department",orderby:"_id asc",field:"_id as value, name as text"},model:{value:a.formData.department_id,callback:function(t){a.$set(a.formData,"department_id",t)},expression:"formData.department_id"}})],1),e("uni-forms-item",{attrs:{name:"address_home_type",label:"现居住地"}},[e("uni-data-checkbox",{attrs:{localdata:a.formOptions.address_home_type_localdata},model:{value:a.formData.address_home_type,callback:function(t){a.$set(a.formData,"address_home_type",t)},expression:"formData.address_home_type"}})],1),e("uni-forms-item",{attrs:{name:"address_home",label:"现居住地详细地址"}},[e("uni-easyinput",{attrs:{trim:"both"},model:{value:a.formData.address_home,callback:function(t){a.$set(a.formData,"address_home",t)},expression:"formData.address_home"}})],1),e("uni-forms-item",{attrs:{name:"address_work_type",label:"现工作地"}},[e("uni-data-checkbox",{attrs:{localdata:a.formOptions.address_work_type_localdata},model:{value:a.formData.address_work_type,callback:function(t){a.$set(a.formData,"address_work_type",t)},expression:"formData.address_work_type"}})],1),e("uni-forms-item",{attrs:{name:"address_work",label:"工作地详细地址"}},[e("uni-easyinput",{attrs:{trim:"both"},model:{value:a.formData.address_work,callback:function(t){a.$set(a.formData,"address_work",t)},expression:"formData.address_work"}})],1),e("uni-forms-item",{attrs:{name:"vaccine_status",label:"接种疫苗状态"}},[e("uni-data-checkbox",{attrs:{localdata:a.formOptions.vaccine_status_localdata},model:{value:a.formData.vaccine_status,callback:function(t){a.$set(a.formData,"vaccine_status",t)},expression:"formData.vaccine_status"}})],1),e("uni-forms-item",{attrs:{name:"status",label:"预约记录状态",required:!0}},[e("uni-data-checkbox",{attrs:{localdata:a.formOptions.status_localdata},model:{value:a.formData.status,callback:function(t){a.$set(a.formData,"status",t)},expression:"formData.status"}})],1),e("uni-forms-item",{attrs:{name:"comment",label:"备注"}},[e("v-uni-textarea",{staticClass:"uni-textarea-border",attrs:{trim:"both"},on:{input:function(t){arguments[0]=t=a.$handleEvent(t),a.binddata("comment",t.detail.value)}},model:{value:a.formData.comment,callback:function(t){a.$set(a.formData,"comment",t)},expression:"formData.comment"}})],1),e("uni-forms-item",{attrs:{name:"idcard",label:"证件号码",required:!0}},[e("uni-easyinput",{attrs:{trim:"both"},model:{value:a.formData.idcard,callback:function(t){a.$set(a.formData,"idcard",t)},expression:"formData.idcard"}})],1),e("uni-forms-item",{attrs:{name:"create_time",label:"创建时间"}},[e("uni-datetime-picker",{attrs:{"return-type":"timestamp"},model:{value:a.formData.create_time,callback:function(t){a.$set(a.formData,"create_time",t)},expression:"formData.create_time"}})],1),e("v-uni-view",{staticClass:"uni-button-group"},[e("v-uni-button",{staticClass:"uni-button",staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:function(t){arguments[0]=t=a.$handleEvent(t),a.submit.apply(void 0,arguments)}}},[a._v("提交")]),e("v-uni-navigator",{staticStyle:{"margin-left":"15px"},attrs:{"open-type":"navigateBack"}},[e("v-uni-button",{staticClass:"uni-button",staticStyle:{width:"100px"}},[a._v("返回")])],1)],1)],1)],1)},o=[]},4599:function(a,t,e){"use strict";e.r(t);var r=e("1ea3"),n=e("f3a6");for(var o in n)"default"!==o&&function(a){e.d(t,a,(function(){return n[a]}))}(o);var i,s=e("f0c5"),l=Object(s["a"])(n["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],i);t["default"]=l.exports},"627e":function(a,t,e){"use strict";(function(a){var r=e("4ea4");e("caad"),e("b64b"),e("d3b7"),e("2532"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(e("5530")),o=e("d118"),i=a.database(),s=(i.command,"fuyin_va");function l(a){var t={};for(var e in o.validator)a.includes(e)&&(t[e]=o.validator[e]);return t}var u={data:function(){var a={name:"",mobile:"",idcard_type:0,from_abroad:null,department_id:[],address_home_type:null,address_home:"",address_work_type:null,address_work:"",vaccine_status:null,status:0,comment:"",idcard:"",create_time:null};return{formData:a,formOptions:{idcard_type_localdata:[{text:"身份证",value:0},{text:"护照",value:1},{text:"军官证",value:2},{text:"港澳身份证",value:3}],from_abroad_localdata:[{text:"本市户籍",value:0},{text:"外省户籍",value:1},{text:"港澳台",value:2},{text:"外国籍",value:3}],address_home_type_localdata:[{text:"本区",value:0},{text:"外区",value:1}],address_work_type_localdata:[{text:"本区",value:0},{text:"外区",value:1}],vaccine_status_localdata:[{text:"未接种过新冠疫苗",value:0},{text:"已接种第一针新冠疫苗",value:1},{text:"已接种第二针新冠疫苗",value:2}],status_localdata:[{text:"已预约",value:0},{text:"已通知",value:1},{text:"已失效",value:2}]},rules:(0,n.default)({},l(Object.keys(a)))}},watch:{formData:{handler:function(a,t){console.log(a),"object"!=typeof a.department_id&&(this.formData.department_id=[a.department_id])},deep:!0}},onLoad:function(a){if(a.id){var t=a.id;this.formDataId=t,this.getDetail(t)}},onReady:function(){this.$refs.form.setRules(this.rules)},methods:{submit:function(){var a=this;uni.showLoading({mask:!0}),this.$refs.form.validate().then((function(t){a.submitForm(t)})).catch((function(){uni.hideLoading()}))},submitForm:function(a){var t=this;i.collection(s).doc(this.formDataId).update(a).then((function(a){uni.showToast({title:"修改成功"}),t.getOpenerEventChannel().emit("refreshData"),setTimeout((function(){return uni.navigateBack()}),500)})).catch((function(a){uni.showModal({content:a.message||"请求服务失败",showCancel:!1})})).finally((function(){uni.hideLoading()}))},getDetail:function(a){var t=this;uni.showLoading({mask:!0}),i.collection(s).doc(a).field("name,mobile,idcard_type,from_abroad,department_id,address_home_type,address_home,address_work_type,address_work,vaccine_status,status,comment,idcard,create_time").get().then((function(a){var e=a.result.data[0];e&&(t.formData=e)})).catch((function(a){uni.showModal({content:a.message||"请求服务失败",showCancel:!1})})).finally((function(){uni.hideLoading()}))}}};t.default=u}).call(this,e("a9ff")["default"])},d118:function(a,t,e){"use strict";var r=e("4ea4");e("4d63"),e("ac1f"),e("25f0"),Object.defineProperty(t,"__esModule",{value:!0}),t.filterToWhere=l,t.enumConverter=t.validator=void 0;var n=r(e("3835")),o=r(e("b85c")),i={name:{rules:[{required:!0},{format:"string"},{minLength:2}],label:"姓名"},mobile:{rules:[{required:!0},{format:"string"},{pattern:"^\\+?[0-9-]{3,20}$"}],label:"手机号码"},idcard_type:{rules:[{required:!0},{format:"int"},{range:[{text:"身份证",value:0},{text:"护照",value:1},{text:"军官证",value:2},{text:"港澳身份证",value:3}]}],defaultValue:0,label:"证件类型"},from_abroad:{rules:[{required:!0},{format:"int"},{range:[{text:"本市户籍",value:0},{text:"外省户籍",value:1},{text:"港澳台",value:2},{text:"外国籍",value:3}]}],label:"户籍"},department_id:{rules:[{required:!0}],label:"部门"},address_home_type:{rules:[{format:"int"},{range:[{text:"本区",value:0},{text:"外区",value:1}]}],label:"现居住地"},address_home:{rules:[{format:"string"},{minLength:3}],label:"现居住地详细地址"},address_work_type:{rules:[{format:"int"},{range:[{text:"本区",value:0},{text:"外区",value:1}]}],label:"现工作地"},address_work:{rules:[{format:"string"},{minLength:3}],label:"工作地详细地址"},vaccine_status:{rules:[{format:"int"},{range:[{text:"未接种过新冠疫苗",value:0},{text:"已接种第一针新冠疫苗",value:1},{text:"已接种第二针新冠疫苗",value:2}]}],label:"接种疫苗状态"},status:{rules:[{required:!0},{format:"int"},{range:[{text:"已预约",value:0},{text:"已通知",value:1},{text:"已失效",value:2}]}],defaultValue:0,label:"预约记录状态"},comment:{rules:[{format:"string"}],label:"备注"},idcard:{rules:[{required:!0},{format:"string"}],label:"证件号码"},create_time:{rules:[{format:"timestamp"}],label:"创建时间"}};t.validator=i;var s={idcard_type_valuetotext:{0:"身份证",1:"护照",2:"军官证",3:"港澳身份证"},from_abroad_valuetotext:{0:"本市户籍",1:"外省户籍",2:"港澳台",3:"外国籍"},address_home_type_valuetotext:{0:"本区",1:"外区"},address_work_type_valuetotext:{0:"本区",1:"外区"},vaccine_status_valuetotext:{0:"未接种过新冠疫苗",1:"已接种第一针新冠疫苗",2:"已接种第二针新冠疫苗"},status_valuetotext:{0:"已预约",1:"已通知",2:"已失效"}};function l(a,t){var e={};for(var r in a){var i=a[r],s=i.type,l=i.value;switch(s){case"search":"string"===typeof l&&l.length&&(e[r]=new RegExp(l));break;case"select":if(l.length){var u,d=[],m=(0,o.default)(l);try{for(m.s();!(u=m.n()).done;){var c=u.value;d.push(t.eq(c))}}catch(g){m.e(g)}finally{m.f()}e[r]=t.or(d)}break;case"range":if(l.length){var f=l[0],_=l[1];e[r]=t.and([t.gte(f),t.lte(_)])}break;case"date":if(l.length){var v=(0,n.default)(l,2),b=v[0],p=v[1],h=new Date(b),x=new Date(p);e[r]=t.and([t.gte(h),t.lte(x)])}break;case"timestamp":if(l.length){var y=(0,n.default)(l,2),D=y[0],k=y[1];e[r]=t.and([t.gte(D),t.lte(k)])}break}}return e}t.enumConverter=s},f3a6:function(a,t,e){"use strict";e.r(t);var r=e("627e"),n=e.n(r);for(var o in r)"default"!==o&&function(a){e.d(t,a,(function(){return r[a]}))}(o);t["default"]=n.a}}]);